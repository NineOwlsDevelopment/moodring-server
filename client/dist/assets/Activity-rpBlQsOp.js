import{c as p,d as j,r as x,ah as f,j as e,V as N,ai as y,aj as b,ak as w,L as u,$ as v,w as k,al as _,h as l,a1 as A}from"./index-laL039p8.js";import{A as q}from"./activity-DbRjeYin.js";/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],M=p("funnel",C);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],L=p("trophy",T),S=s=>s.type||s.activity_type||"unknown",D=({activity:s})=>{const a=(()=>{if(!s.metadata)return{};if(typeof s.metadata=="string")try{return JSON.parse(s.metadata)}catch{return{}}return s.metadata})(),n=S(s),o=()=>{var m;switch(n){case"trade":const t=a.side||a.option_side,i=a.trade_type||a.action,g=a.quantity||a.shares||0,h=a.amount||a.cost||a.total_cost||0;return e.jsxs("span",{className:"flex flex-wrap items-center gap-1",children:[e.jsxs("span",{className:`font-semibold ${t==="yes"?"text-brand-success":"text-brand-danger"}`,children:[i==="buy"?"Bought":"Sold"," ",A(g)," ",t==null?void 0:t.toUpperCase()]}),e.jsx("span",{className:"text-moon-grey",children:"shares"}),h>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-moon-grey",children:"for"}),e.jsx("span",{className:"font-semibold text-white",children:l(h)})]})]});case"market_created":case"market_initialized":return e.jsx("span",{className:"text-moon-grey",children:"Created a new market"});case"market_resolved":return e.jsxs("span",{className:"flex items-center gap-1 flex-wrap",children:[e.jsx("span",{className:"text-moon-grey",children:"Market resolved:"}),e.jsx("span",{className:"font-semibold text-neon-iris",children:a.outcome||((m=a.winning_side)==null?void 0:m.toUpperCase())})]});case"deposit":return e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-moon-grey",children:"Deposited"}),e.jsx("span",{className:"font-semibold text-brand-success",children:l(a.amount||0)})]});case"withdrawal":return e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-moon-grey",children:"Withdrew"}),e.jsx("span",{className:"font-semibold text-amber-400",children:l(a.amount||0)})]});case"claim":return e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-moon-grey",children:"Claimed"}),e.jsx("span",{className:"font-semibold text-brand-success",children:l(a.payout||0)})]});case"lp_rewards_claimed":return e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-moon-grey",children:"Claimed LP rewards"}),e.jsx("span",{className:"font-semibold text-brand-success",children:l(a.usdc_payout||0)})]});case"liquidity_added":return e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-moon-grey",children:"Added liquidity:"}),e.jsx("span",{className:"font-semibold text-aqua-pulse",children:l(a.amount||0)})]});case"liquidity_removed":return e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-moon-grey",children:"Removed liquidity:"}),e.jsx("span",{className:"font-semibold text-amber-400",children:l(a.amount||0)})]});case"user_joined":return e.jsx("span",{className:"text-moon-grey",children:"Joined the platform"});case"comment":return e.jsx("span",{className:"flex items-center gap-1",children:e.jsx("span",{className:"text-moon-grey",children:"Commented on market"})});default:return e.jsx("span",{className:"text-moon-grey capitalize",children:n.replace(/_/g," ")})}},r=s.market_id||a.market_id||(n==="market_created"&&s.entity_type==="market"?s.entity_id:null),d=s.market_question||a.market_question||(n==="market_created"?a.question:null);return e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-graphite-light/50 hover:bg-graphite-light transition-all duration-200  animate-fade-in",children:[s.username&&e.jsx(v,{name:s.username,imageUrl:s.avatar_url,size:"md"}),e.jsx("div",{className:"flex-1 min-w-0 overflow-hidden",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden",children:[e.jsxs("div",{className:"text-sm leading-relaxed flex flex-wrap items-center gap-x-1",children:[s.username&&e.jsxs("span",{className:"font-semibold text-white truncate max-w-[120px] inline-block align-middle",children:["@",s.username]}),o()]}),r&&d&&e.jsx(u,{to:`/market/${r}`,className:"text-neon-iris hover:text-neon-iris-light text-sm font-medium line-clamp-1 mt-1.5 transition-colors block",children:d})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-moon-grey-dark flex-shrink-0 whitespace-nowrap",children:[e.jsx(_,{className:"w-3.5 h-3.5"}),k(Number(s.created_at))]})]})})]})},U=[{id:"all",label:"All",icon:N},{id:"trade",label:"Trades",icon:y},{id:"deposit",label:"Deposits",icon:b},{id:"withdrawal",label:"Withdrawals",icon:w},{id:"claim",label:"Claims",icon:L}],F=()=>{const{user:s}=j(),[c,a]=x.useState([]),[n,o]=x.useState(!0),[r,d]=x.useState("all");x.useEffect(()=>{m()},[r,s]);const m=async()=>{o(!0);try{if(s){const{activities:t}=await f({type:r!=="all"?r:void 0});a(t)}else a([])}catch(t){console.error("Failed to load activities:",t)}finally{o(!1)}};return e.jsxs("div",{className:"min-h-screen pb-20 md:pb-8",children:[e.jsx("div",{className:"fixed inset-0 bg-gradient-to-b from-neon-iris/5 via-transparent to-aqua-pulse/5 pointer-events-none"}),e.jsxs("div",{className:"relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-1",children:"Activity"}),e.jsx("p",{className:"text-moon-grey text-sm",children:"Track your transactions and activity"})]})}),s&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(M,{className:"w-4 h-4 text-moon-grey-dark"}),e.jsx("span",{className:"text-sm text-moon-grey-dark",children:"Filter by"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(t=>{const i=t.icon;return e.jsxs("button",{onClick:()=>d(t.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 min-h-[40px] ${r===t.id?"bg-gradient-brand text-white shadow-neon-subtle":"bg-graphite-light text-moon-grey  hover:text-white "}`,children:[e.jsx(i,{className:"w-4 h-4"}),t.label]},t.id)})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"relative",children:e.jsxs("span",{className:"flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-success opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-brand-success"})]})}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Recent Transactions"})]}),n?e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((t,i)=>e.jsx("div",{className:"h-20 bg-graphite-light rounded-xl skeleton-pulse"},i))}):c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-graphite-light flex items-center justify-center mb-4",children:e.jsx(q,{className:"w-8 h-8 text-moon-grey-dark"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No activity yet"}),e.jsx("p",{className:"text-moon-grey text-center max-w-sm mb-6",children:s?"Start trading to see your transaction history here!":"Please log in to view your activity."}),s&&e.jsx(u,{to:"/markets",className:"btn btn-primary",children:"Browse Markets"})]}):e.jsx("div",{className:"space-y-3",children:c.map((t,i)=>e.jsx("div",{style:{animationDelay:`${i*50}ms`},children:e.jsx(D,{activity:t})},t.id))})]}),!n&&c.length>0&&e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{className:"text-neon-iris hover:text-neon-iris-light text-sm font-medium transition-colors",children:"Load more activity"})})]})]})};export{F as Activity};
