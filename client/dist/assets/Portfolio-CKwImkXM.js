import{d as P,r as i,a8 as S,l as q,a9 as L,aa as $,j as e,i as a,L as x,Y as z,ab as C}from"./index-NuQh3N58.js";const T=()=>{var v;const{user:r}=P(),[d,u]=i.useState("positions"),[c,N]=i.useState("open"),[t,b]=i.useState(null),[m,p]=i.useState([]),[o,y]=i.useState([]),[l,g]=i.useState(null),[h,j]=i.useState(!0);i.useEffect(()=>{r&&f()},[r,c]);const f=async()=>{j(!0);try{const[s,n,w,k]=await Promise.all([S(),q({status:c}),L(),$()]);b(s),p(n.positions),y(w.positions),g(k)}catch(s){console.error("Failed to load portfolio:",s)}finally{j(!1)}},_=[{id:"positions",label:"Positions",count:m.length},{id:"liquidity",label:"Liquidity",count:o.length},{id:"history",label:"Trade History"}];return r?e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Portfolio"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"card bg-gradient-to-br from-dark-900 to-dark-800",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Value"}),e.jsx("div",{className:"text-3xl font-bold text-white",children:a((t==null?void 0:t.total_value)||0)}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Cash + Positions + Liquidity"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Cash Balance"}),e.jsx("div",{className:"text-3xl font-bold text-white",children:a(((v=r==null?void 0:r.wallet)==null?void 0:v.balance_usdc)||0)}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Available to trade"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Positions Value"}),e.jsx("div",{className:"text-3xl font-bold text-white",children:a((t==null?void 0:t.positions_value)||0)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[m.length," active positions"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total P&L"}),e.jsxs("div",{className:`text-3xl font-bold ${((t==null?void 0:t.total_pnl)||0)>=0?"text-success-400":"text-danger-400"}`,children:[((t==null?void 0:t.total_pnl)||0)>=0?"+":"",a((t==null?void 0:t.total_pnl)||0)]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((t==null?void 0:t.total_pnl_percent)||0)>=0?"+":"",((t==null?void 0:t.total_pnl_percent)||0).toFixed(1),"% all time"]})]})]}),l&&e.jsxs("div",{className:"card mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Performance Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Realized P&L"}),e.jsxs("div",{className:`text-xl font-bold ${l.realized_pnl>=0?"text-success-400":"text-danger-400"}`,children:[l.realized_pnl>=0?"+":"",a(l.realized_pnl)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Unrealized P&L"}),e.jsxs("div",{className:`text-xl font-bold ${l.unrealized_pnl>=0?"text-success-400":"text-danger-400"}`,children:[l.unrealized_pnl>=0?"+":"",a(l.unrealized_pnl)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Best Trade"}),l.best_trade?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xl font-bold text-success-400",children:["+",a(l.best_trade.pnl)]}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:l.best_trade.market})]}):e.jsx("div",{className:"text-xl font-bold text-gray-500",children:"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Worst Trade"}),l.worst_trade?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xl font-bold text-danger-400",children:a(l.worst_trade.pnl)}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:l.worst_trade.market})]}):e.jsx("div",{className:"text-xl font-bold text-gray-500",children:"-"})]})]})]}),e.jsx("div",{className:"flex border-b border-dark-700 mb-6",children:_.map(s=>e.jsxs("button",{onClick:()=>u(s.id),className:`px-4 py-3 font-medium text-sm transition-colors relative ${d===s.id?"text-primary-400":"text-gray-400 hover:text-white"}`,children:[s.label,s.count!==void 0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-dark-700 rounded-full text-xs",children:s.count}),d===s.id&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-500"})]},s.id))}),d==="positions"&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Your Positions"}),e.jsx("div",{className:"flex gap-2",children:["open","closed","all"].map(s=>e.jsx("button",{onClick:()=>N(s),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${c===s?"bg-primary-600 text-white":"bg-dark-800 text-gray-400 hover:text-white"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),h?e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((s,n)=>e.jsx("div",{className:"h-24 bg-dark-800 rounded-lg animate-pulse"},n))}):m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ“Š"}),e.jsx("p",{className:"text-gray-400 mb-4",children:c==="open"?"You don't have any open positions":c==="closed"?"No closed positions yet":"No positions yet. Start trading!"}),e.jsx(x,{to:"/markets",className:"btn btn-primary",children:"Browse Markets"})]}):e.jsx("div",{className:"space-y-4",children:m.map(s=>e.jsx(x,{to:`/market/${s.market_id}`,className:"block  rounded-lg p-4 bg-dark-800 hover:bg-dark-700 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-white mb-1 truncate",children:s.market_question}),s.option_label&&e.jsx("p",{className:"text-sm text-primary-400 mb-2",children:s.option_label}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[e.jsx("span",{className:`font-medium ${s.side==="yes"?"text-success-400":"text-danger-400"}`,children:s.side.toUpperCase()}),e.jsxs("span",{className:"text-gray-400",children:[z(s.shares)," shares @"," ",C(s.avg_price)]}),s.is_resolved&&e.jsx("span",{className:"px-2 py-0.5 bg-success-500/20 text-success-300 rounded-full text-xs ",children:"Resolved"})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("div",{className:"font-semibold text-white",children:a(s.shares*s.current_price)}),e.jsxs("div",{className:`text-sm font-medium ${s.pnl>=0?"text-success-400":"text-danger-400"}`,children:[s.pnl>=0?"+":"",a(s.pnl)," (",s.pnl_percent>=0?"+":"",s.pnl_percent.toFixed(1),"%)"]})]})]})},s.id))})]}),d==="liquidity"&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Liquidity Positions"}),h?e.jsx("div",{className:"space-y-4",children:Array.from({length:2}).map((s,n)=>e.jsx("div",{className:"h-24 bg-dark-800 rounded-lg animate-pulse"},n))}):o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ’§"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"You haven't provided liquidity to any markets yet"}),e.jsx(x,{to:"/markets",className:"btn btn-primary",children:"Explore Markets"})]}):e.jsx("div",{className:"space-y-4",children:o.map(s=>e.jsx(x,{to:`/market/${s.market_id}`,className:"block  rounded-lg p-4 bg-dark-800 hover:bg-dark-700 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-white mb-1 truncate",children:s.market_question}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-400",children:[e.jsxs("span",{children:["Provided: ",a(s.liquidity_provided)]}),e.jsxs("span",{children:["Fees earned:"," ",e.jsxs("span",{className:"text-success-400",children:["+",a(s.fees_earned)]})]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("div",{className:"font-semibold text-white",children:a(s.current_value)}),e.jsxs("div",{className:`text-sm font-medium ${s.pnl>=0?"text-success-400":"text-danger-400"}`,children:[s.pnl>=0?"+":"",a(s.pnl)]})]})]})},s.id))})]}),d==="history"&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Trade History"}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ“œ"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"View your complete trade history"}),e.jsx(x,{to:"/activity",className:"btn btn-primary",children:"View Activity"})]})]})]}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ’¼"}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Portfolio"}),e.jsx("p",{className:"text-gray-400",children:"Connect your wallet to view your portfolio"})]})};export{T as Portfolio};
