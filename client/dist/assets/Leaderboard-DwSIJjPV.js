import{i as C,a6 as R,r as n,ap as T,j as e,aq as k,b as g}from"./index-4FQH80kW.js";import{g as _}from"./userProfile-CnpEGhJg.js";const m={profit:{label:"P&L",description:"Top traders by realized profit & loss",valueLabel:"P&L",icon:"ðŸ’°"},volume:{label:"Volume",description:"Most active traders by total volume",valueLabel:"Volume",icon:"ðŸ“Š"}},$=()=>{var w,y;const{user:i}=C(),b=R(),[t,L]=n.useState("profit"),[o,U]=n.useState([]),[h,u]=n.useState(!0),[j,v]=n.useState(null);n.useEffect(()=>{N()},[t]);const N=async()=>{u(!0),v(null);try{const{leaderboard:s}=await T({metric:t,limit:100});U(s)}catch(s){console.error("Failed to load leaderboard:",s),v("Unable to load the leaderboard right now. Please try again.")}finally{u(!1)}},p=o.slice(0,3),r=o.find(s=>s.user_id===(i==null?void 0:i.id)),f=s=>t==="profit"?`${s>=0?"+":""}${g(s)}`:g(s);return e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-6 pb-20 md:pb-8",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Leaderboard"}),e.jsx("div",{className:"flex items-center gap-2 bg-graphite-deep rounded-xl p-1 border border-graphite-light inline-flex mb-4",children:Object.keys(m).map(s=>e.jsx("button",{onClick:()=>L(s),className:`px-4 py-1.5 rounded-lg font-medium text-sm transition-all ${t===s?"bg-neon-iris text-white shadow-md shadow-neon-iris/20":"text-moon-grey hover:text-white hover:bg-graphite-light/50"}`,children:m[s].label},s))}),r&&e.jsx("div",{className:"bg-graphite-light rounded-lg p-3 border border-graphite-light mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-brand flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:((w=r.display_name)==null?void 0:w.charAt(0).toUpperCase())||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"font-semibold text-white text-sm",children:["Rank #",r.rank]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-moon-grey",children:[e.jsx("span",{children:f(t==="profit"?r.total_pnl:r.total_volume??0)}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[(y=r.win_rate)==null?void 0:y.toFixed(0),"% win"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[k(r.total_trades)," trades"]})]})]})]})})]}),j&&e.jsx("div",{className:"bg-graphite-light rounded-lg p-4 border border-graphite-light mb-5",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-danger-400 text-sm mb-1",children:"Failed to load leaderboard"}),e.jsx("p",{className:"text-xs text-moon-grey",children:j})]}),e.jsx("button",{onClick:N,className:"px-4 py-2 rounded-lg bg-danger-500 text-white font-medium text-sm hover:bg-danger-400 transition-all",children:"Retry"})]})}),p.length>0&&!h&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Top 3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:p.map((s,a)=>{var l,d;const c=a===1?0:a===0?1:2,x=t==="profit"?s.total_pnl:s.total_volume??0;return e.jsxs("div",{onClick:()=>b(_(s.username||s.user_id)),className:"bg-graphite-light rounded-lg p-4 border border-graphite-light hover:border-neon-iris/30 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-brand flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:((l=s.display_name)==null?void 0:l.charAt(0).toUpperCase())||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-white text-sm truncate",children:s.display_name||s.username}),e.jsxs("p",{className:"text-xs text-moon-grey-dark",children:["Rank #",s.rank]})]}),e.jsx("div",{className:"text-2xl",children:["ðŸ¥ˆ","ðŸ¥‡","ðŸ¥‰"][c]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-moon-grey-dark",children:m[t].valueLabel}),e.jsx("span",{className:`text-sm font-bold ${t==="profit"?x>=0?"text-aqua-pulse":"text-danger-400":"text-neon-iris"}`,children:f(x)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-moon-grey-dark",children:"Win Rate"}),e.jsxs("span",{className:"text-xs text-moon-grey",children:[(d=s.win_rate)==null?void 0:d.toFixed(0),"%"]})]})]})]},s.user_id)})})]}),h&&p.length===0&&e.jsx("div",{className:"mb-5",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[0,1,2].map(s=>e.jsxs("div",{className:"bg-graphite-light rounded-lg p-4 border border-graphite-light animate-pulse",children:[e.jsx("div",{className:"h-12 bg-graphite-hover rounded mb-3"}),e.jsx("div",{className:"h-4 bg-graphite-hover rounded mb-2"}),e.jsx("div",{className:"h-3 bg-graphite-hover rounded w-2/3"})]},s))})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"All Traders"}),e.jsx("div",{className:"bg-graphite-light rounded-lg border border-graphite-light overflow-hidden",children:h?e.jsx("div",{className:"p-4 space-y-2",children:Array.from({length:10}).map((s,a)=>e.jsxs("div",{className:"flex items-center gap-3 animate-pulse",children:[e.jsx("div",{className:"w-10 h-10 bg-graphite-hover rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-1.5",children:[e.jsx("div",{className:"h-3 w-32 bg-graphite-hover rounded"}),e.jsx("div",{className:"h-2 w-24 bg-graphite-hover rounded"})]}),e.jsx("div",{className:"h-3 w-20 bg-graphite-hover rounded"})]},a))}):o.length===0?e.jsx("div",{className:"py-12 text-center",children:e.jsx("p",{className:"text-moon-grey",children:"No traders yet"})}):e.jsxs("div",{className:"divide-y divide-graphite-hover",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-3 px-4 py-3 bg-graphite-deep border-b border-graphite-hover",children:[e.jsx("div",{className:"col-span-1 text-xs font-medium text-moon-grey-dark",children:"Rank"}),e.jsx("div",{className:"col-span-5 text-xs font-medium text-moon-grey-dark",children:"Trader"}),e.jsx("div",{className:"col-span-2 text-right text-xs font-medium text-moon-grey-dark",children:m[t].valueLabel}),e.jsx("div",{className:"col-span-2 text-right text-xs font-medium text-moon-grey-dark",children:"Win Rate"}),e.jsx("div",{className:"col-span-2 text-right text-xs font-medium text-moon-grey-dark",children:"Trades"})]}),e.jsx("div",{className:"divide-y divide-graphite-hover",children:o.map(s=>{var l,d;const a=t==="profit"?s.total_pnl:s.total_volume??0,c=(i==null?void 0:i.id)===s.user_id,x=s.rank<=3;return e.jsxs("div",{onClick:()=>b(_(s.username||s.user_id)),className:`group grid grid-cols-12 gap-3 px-4 py-3 items-center transition-all cursor-pointer ${c?"bg-neon-iris/10 border-l-2 border-neon-iris":"hover:bg-graphite-hover/50"}`,children:[e.jsx("div",{className:"col-span-1 flex items-center",children:x?e.jsx("span",{className:"text-sm",children:["ðŸ¥ˆ","ðŸ¥‡","ðŸ¥‰"][s.rank-1]}):e.jsxs("span",{className:"text-xs font-medium text-moon-grey tabular-nums",children:["#",s.rank]})}),e.jsxs("div",{className:"col-span-5 flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-brand flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:((l=s.display_name)==null?void 0:l.charAt(0).toUpperCase())||"U"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("p",{className:"font-semibold text-white text-sm truncate",children:[s.display_name||s.username,c&&e.jsx("span",{className:"ml-1.5 text-xs text-neon-iris",children:"(You)"})]}),e.jsxs("p",{className:"text-xs text-moon-grey-dark truncate",children:["@",s.username]})]})]}),e.jsx("div",{className:"col-span-2 text-right",children:e.jsxs("span",{className:`text-sm font-bold ${t==="profit"?a>=0?"text-aqua-pulse":"text-danger-400":"text-neon-iris"}`,children:[t==="profit"&&a>=0?"+":"",g(a)]})}),e.jsx("div",{className:"col-span-2 text-right",children:e.jsxs("span",{className:"text-sm text-moon-grey font-medium",children:[(d=s.win_rate)==null?void 0:d.toFixed(0),"%"]})}),e.jsx("div",{className:"col-span-2 text-right",children:e.jsx("span",{className:"text-sm text-moon-grey font-medium",children:k(s.total_trades)})})]},s.user_id)})})]})})]})]})};export{$ as Leaderboard};
