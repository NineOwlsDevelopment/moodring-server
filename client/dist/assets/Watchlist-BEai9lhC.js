import{d as k,a0 as y,r,au as v,j as e,L as g,av as u,M as w}from"./index-w0iIjARP.js";import{A as M}from"./arrow-left-xrfzXTlN.js";const E=()=>{const{user:a}=k(),d=y(),[n,b]=r.useState([]),[i,o]=r.useState(!0),[l,p]=r.useState(1),[c,j]=r.useState(!0),[m,h]=r.useState(null),x=r.useCallback(async()=>{var s;if(!a){o(!1);return}o(!0),h(null);try{const t=await v({page:l,limit:20});b(N=>l===1?t.markets:[...N,...t.markets]),j(((s=t.pagination)==null?void 0:s.hasMore)??!1)}catch(t){console.error("Failed to load watchlist:",t),h(t.message||"Failed to load watchlist")}finally{o(!1)}},[a,l]);r.useEffect(()=>{if(!a){d("/");return}x()},[a,d,x]);const f=()=>{!i&&c&&p(s=>s+1)};return a?e.jsx("div",{className:"min-h-screen bg-ink-black",children:e.jsxs("div",{className:"section-container py-8 md:py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(g,{to:"/",className:"inline-flex items-center gap-2 text-moon-grey hover:text-white transition-colors mb-6",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Back to Home"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-neon-iris/10 border border-neon-iris/20",children:e.jsx(u,{className:"w-6 h-6 text-neon-iris fill-current"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:"My Watchlist"}),e.jsx("p",{className:"text-moon-grey-dark mt-1",children:"Markets you're following"})]})]})]}),m&&e.jsx("div",{className:"mb-6 p-4 rounded-lg bg-brand-danger/10 border border-brand-danger/20 text-brand-danger",children:m}),i&&n.length===0?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-neon-iris"})}):n.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-graphite-deep border border-white/10 mb-4",children:e.jsx(u,{className:"w-8 h-8 text-moon-grey-dark"})}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"No markets in your watchlist"}),e.jsx("p",{className:"text-moon-grey-dark mb-6",children:"Start adding markets to your watchlist to track them easily"}),e.jsx(g,{to:"/markets",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-neon-iris/10 hover:bg-neon-iris/20 text-neon-iris border border-neon-iris/20 transition-colors",children:"Browse Markets"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(s=>e.jsx(w,{market:s},s.id))}),c&&e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{onClick:f,disabled:i,className:"px-6 py-3 rounded-lg bg-graphite-deep hover:bg-graphite-hover border border-white/10 text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Loading...":"Load More"})})]})]})}):null};export{E as Watchlist};
