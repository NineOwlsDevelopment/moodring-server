import{r as n,bg as _,t as m,j as e,m as l,b9 as c,A as S,bh as R}from"./index-4FQH80kW.js";const A=()=>{const[d,f]=n.useState([]),[o,p]=n.useState({total:0,limit:50,offset:0,has_more:!1}),[w,u]=n.useState(!0),[h,g]=n.useState(null),[y,j]=n.useState(null),[i,a]=n.useState({tradeId:null,reviewStatus:"reviewed",reviewNotes:"",riskScore:"",manualActionRequired:!1});n.useEffect(()=>{x()},[]);const x=async()=>{var t,s;try{u(!0);const r=await _({limit:o.limit,page:Math.floor(o.offset/o.limit)+1});f(r.suspicious_trades),p(r.pagination)}catch(r){console.error("Failed to load suspicious trades:",r),m.error(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.error)||"Failed to load suspicious trades")}finally{u(!1)}},N=async()=>{var t,s;if(i.tradeId)try{g(i.tradeId),await R(i.tradeId,{review_status:i.reviewStatus,review_notes:i.reviewNotes||void 0,risk_score:i.riskScore?Number(i.riskScore):void 0,manual_action_required:i.manualActionRequired}),m.success("Trade reviewed successfully"),a({tradeId:null,reviewStatus:"reviewed",reviewNotes:"",riskScore:"",manualActionRequired:!1}),x()}catch(r){console.error("Failed to review trade:",r),m.error(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.error)||"Failed to review trade")}finally{g(null)}},b=t=>{switch(t){case"flagged":return"text-rose-400 border-rose-400/30 bg-rose-400/10";case"cleared":return"text-aqua-pulse border-aqua-pulse/30 bg-aqua-pulse/10";case"reviewed":return"text-neon-iris border-neon-iris/30 bg-neon-iris/10";default:return"text-amber-400 border-amber-400/30 bg-amber-400/10"}},v=t=>t>=8?"text-rose-400 bg-rose-500/10":t>=5?"text-amber-400 bg-amber-500/10":"text-aqua-pulse bg-aqua-pulse/10";return e.jsxs("div",{className:"min-h-screen bg-ink-black",children:[e.jsx("div",{className:"fixed inset-0 pointer-events-none",children:e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(124,77,255,0.08),transparent_60%)]"})}),e.jsxs("div",{className:"relative px-4 py-6 sm:p-6 lg:p-8",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 sm:mb-10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] tracking-[0.3em] uppercase text-neon-iris/80 font-medium mb-2 sm:mb-3",children:"Administration"}),e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-extralight tracking-tight text-white",children:"Suspicious Trades"})]}),e.jsxs("div",{className:"text-xs sm:text-sm text-moon-grey/50",children:[o.total," flagged trades"]})]}),w?e.jsx("div",{className:"bg-graphite-deep/30 border border-white/5 flex items-center justify-center py-20",children:e.jsx("div",{className:"w-8 h-8 border-2 border-white/20 border-t-neon-iris rounded-full animate-spin"})}):d.length===0?e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-graphite-deep/30 border border-white/5 text-center py-20",children:e.jsx("p",{className:"text-moon-grey/40 text-sm font-light",children:"No suspicious trades found"})}):e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"bg-graphite-deep/30 border border-white/5",children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("th",{className:"text-left py-4 px-5 text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 font-medium",children:"Trade ID"}),e.jsx("th",{className:"text-left py-4 px-5 text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 font-medium",children:"User ID"}),e.jsx("th",{className:"text-left py-4 px-5 text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 font-medium",children:"Risk Score"}),e.jsx("th",{className:"text-left py-4 px-5 text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 font-medium",children:"Flags"}),e.jsx("th",{className:"text-left py-4 px-5 text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 font-medium",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-5 text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 font-medium",children:"Created"}),e.jsx("th",{className:"text-left py-4 px-5 text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:d.map(t=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/[0.02] transition-colors",children:[e.jsx("td",{className:"py-4 px-5",children:e.jsx("code",{className:"font-mono text-[10px] text-moon-grey/40",children:c(t.trade_id,8)})}),e.jsx("td",{className:"py-4 px-5",children:e.jsx("code",{className:"font-mono text-[10px] text-moon-grey/40",children:c(t.user_id,8)})}),e.jsx("td",{className:"py-4 px-5",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium ${v(t.risk_score)}`,children:t.risk_score.toFixed(1)})}),e.jsx("td",{className:"py-4 px-5",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[t.flags.slice(0,3).map((s,r)=>e.jsx("span",{className:"px-2 py-0.5 text-[10px] bg-white/5 text-moon-grey/60 border border-white/10",children:s},r)),t.flags.length>3&&e.jsxs("span",{className:"px-2 py-0.5 text-[10px] text-moon-grey/40",children:["+",t.flags.length-3]})]})}),e.jsx("td",{className:"py-4 px-5",children:e.jsx("span",{className:`px-2.5 py-1 text-[10px] tracking-[0.1em] uppercase font-medium border ${b(t.review_status)}`,children:t.review_status})}),e.jsx("td",{className:"py-4 px-5 text-moon-grey/40 text-sm font-light",children:new Date(typeof t.created_at=="string"&&t.created_at.includes(" ")?t.created_at.replace(" ","T"):t.created_at).toLocaleString()}),e.jsx("td",{className:"py-4 px-5",children:e.jsx("button",{onClick:()=>a({tradeId:t.id,reviewStatus:t.review_status,reviewNotes:t.review_notes||"",riskScore:t.risk_score.toString(),manualActionRequired:t.manual_action_required||!1}),className:"text-[10px] tracking-[0.1em] uppercase text-neon-iris hover:text-neon-iris/80 font-medium transition-colors",children:"Review"})})]},t.id))})]})}),e.jsx("div",{className:"lg:hidden divide-y divide-white/5",children:d.map(t=>{const s=y===t.id;return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between cursor-pointer",onClick:()=>j(s?null:t.id),children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:`px-2 py-0.5 text-xs font-medium ${v(t.risk_score)}`,children:["Risk: ",t.risk_score.toFixed(1)]}),e.jsx("span",{className:`px-2 py-0.5 text-[9px] tracking-[0.1em] uppercase font-medium border ${b(t.review_status)}`,children:t.review_status})]}),e.jsxs("div",{className:"text-[10px] text-moon-grey/40 mt-2 font-mono",children:["Trade: ",c(t.trade_id,8)]})]}),e.jsx("span",{className:`text-moon-grey/40 transition-transform duration-200 inline-block text-xs ml-2 ${s?"rotate-180":""}`,children:"â–¼"})]}),e.jsx(S,{children:s&&e.jsx(l.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"pt-4 mt-4 border-t border-white/5 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-moon-grey/40",children:"User ID"}),e.jsx("div",{className:"text-moon-grey/60 font-mono text-[10px] mt-1",children:c(t.user_id,8)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-moon-grey/40",children:"Created"}),e.jsx("div",{className:"text-white font-light mt-1",children:new Date(typeof t.created_at=="string"&&t.created_at.includes(" ")?t.created_at.replace(" ","T"):t.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-moon-grey/40 text-xs",children:"Flags"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:t.flags.map((r,k)=>e.jsx("span",{className:"px-2 py-0.5 text-[10px] bg-white/5 text-moon-grey/60 border border-white/10",children:r},k))})]}),e.jsx("button",{onClick:r=>{r.stopPropagation(),a({tradeId:t.id,reviewStatus:t.review_status,reviewNotes:t.review_notes||"",riskScore:t.risk_score.toString(),manualActionRequired:t.manual_action_required||!1})},className:"w-full py-2.5 text-xs tracking-wide uppercase font-medium bg-white text-ink-black hover:bg-moon-grey-light transition-all duration-300",children:"Review Trade"})]})})})]},t.id)})}),o.has_more&&e.jsx("div",{className:"flex justify-center py-6 border-t border-white/5",children:e.jsx("button",{onClick:()=>{p(t=>({...t,offset:t.offset+t.limit})),x()},className:"px-6 py-2.5 text-xs tracking-wide uppercase font-medium text-white border border-white/20 hover:border-white/40 hover:bg-white/5 transition-all duration-300",children:"Load More"})})]}),i.tradeId&&e.jsx("div",{className:"fixed inset-0 bg-ink-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>a({tradeId:null,reviewStatus:"reviewed",reviewNotes:"",riskScore:"",manualActionRequired:!1}),children:e.jsxs(l.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},onClick:t=>t.stopPropagation(),className:"relative bg-graphite-deep border border-white/5 max-w-lg w-full max-h-[90vh] overflow-y-auto p-5 sm:p-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-neon-iris/50 to-transparent"}),e.jsx("h2",{className:"text-lg sm:text-xl font-light text-white mb-5 sm:mb-6",children:"Review Suspicious Trade"}),e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-2 sm:mb-3",children:"Review Status"}),e.jsxs("select",{value:i.reviewStatus,onChange:t=>a(s=>({...s,reviewStatus:t.target.value})),className:"w-full bg-ink-black border border-white/10 px-3 sm:px-4 py-2.5 sm:py-3 text-sm text-white focus:outline-none focus:border-neon-iris/50 transition-colors",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"reviewed",children:"Reviewed"}),e.jsx("option",{value:"cleared",children:"Cleared"}),e.jsx("option",{value:"flagged",children:"Flagged"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-2 sm:mb-3",children:"Risk Score"}),e.jsx("input",{type:"number",min:"0",max:"10",step:"0.1",value:i.riskScore,onChange:t=>a(s=>({...s,riskScore:t.target.value})),className:"w-full bg-ink-black border border-white/10 px-3 sm:px-4 py-2.5 sm:py-3 text-sm text-white placeholder-moon-grey/40 focus:outline-none focus:border-neon-iris/50 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-2 sm:mb-3",children:"Review Notes"}),e.jsx("textarea",{value:i.reviewNotes,onChange:t=>a(s=>({...s,reviewNotes:t.target.value})),placeholder:"Add review notes...",className:"w-full bg-ink-black border border-white/10 px-3 sm:px-4 py-2.5 sm:py-3 text-sm text-white placeholder-moon-grey/40 focus:outline-none focus:border-neon-iris/50 transition-colors resize-none",rows:4})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"manualAction",checked:i.manualActionRequired,onChange:t=>a(s=>({...s,manualActionRequired:t.target.checked})),className:"w-4 h-4 accent-neon-iris"}),e.jsx("label",{htmlFor:"manualAction",className:"text-sm text-moon-grey/60",children:"Manual action required"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-5 sm:mt-6",children:[e.jsx("button",{onClick:()=>a({tradeId:null,reviewStatus:"reviewed",reviewNotes:"",riskScore:"",manualActionRequired:!1}),className:"flex-1 py-2.5 sm:py-3 text-xs tracking-wide uppercase font-medium text-white border border-white/20 hover:border-white/40 hover:bg-white/5 transition-all duration-300",children:"Cancel"}),e.jsx("button",{onClick:N,disabled:h===i.tradeId,className:"flex-1 py-2.5 sm:py-3 text-xs tracking-wide uppercase font-medium bg-white text-ink-black hover:bg-moon-grey-light transition-all duration-300 disabled:opacity-50",children:h===i.tradeId?"Reviewing...":"Submit Review"})]})]})})]})]})};export{A as AdminSuspiciousTrades};
