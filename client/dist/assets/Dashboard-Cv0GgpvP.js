import{r,a_ as Y,a$ as Z,b0 as ee,b1 as te,b2 as se,t as c,j as e,m as n,L as R,b as d,A as ae,b3 as re,b4 as le,b5 as ie}from"./index-4FQH80kW.js";const U={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:[.25,.1,.25,1]}},E={animate:{transition:{staggerChildren:.08}}},ne=()=>{var T,$,F,D,L;const[s,H]=r.useState(null),[i,M]=r.useState(null),[l,q]=r.useState(null),[x,O]=r.useState(0),[I,w]=r.useState(!0),[f,v]=r.useState(!1),[g,j]=r.useState(""),[m,N]=r.useState(!1),[k,S]=r.useState(!1),[h,_]=r.useState(""),[p,C]=r.useState(""),[b,W]=r.useState(""),[P,A]=r.useState(!1),[y,V]=r.useState(!1);r.useEffect(()=>{u()},[]);const u=async()=>{var t,o;try{w(!0);const[a,z,J,K,Q]=await Promise.all([Y(),Z(),ee(),te(),se()]);H(a),M(z),q(J),O(K.withdrawals.length),N(Q.flags.pause_trading)}catch(a){console.error("Failed to load dashboard data:",a),c.error(((o=(t=a.response)==null?void 0:t.data)==null?void 0:o.error)||"Failed to load dashboard data")}finally{w(!1)}},B=async()=>{var t,o;try{S(!0),await re({pause_trading:!m}),N(!m),c.success(m?"Trading has been enabled":"Trading has been paused")}catch(a){console.error("Failed to update pause flags:",a),c.error(((o=(t=a.response)==null?void 0:t.data)==null?void 0:o.error)||"Failed to update pause flags")}finally{S(!1)}},G=async()=>{var t,o;if(i)try{v(!0);const a=g?Number(g):void 0;await le(a?{amount:a}:void 0),c.success("Protocol fees withdrawn successfully"),j(""),u()}catch(a){console.error("Failed to withdraw fees:",a),c.error(((o=(t=a.response)==null?void 0:t.data)==null?void 0:o.error)||"Failed to withdraw fees")}finally{v(!1)}},X=async()=>{var t,o;if(!h||!p||!b){c.error("Please fill in all fields");return}try{A(!0);const a=await ie({passcode:h,amount:Number(p),destination_address:b});c.success(`Successfully withdrew ${d(a.amount)} to cold storage`),_(""),C(""),W(""),u()}catch(a){console.error("Failed to withdraw to cold storage:",a),c.error(((o=(t=a.response)==null?void 0:t.data)==null?void 0:o.error)||"Failed to withdraw to cold storage")}finally{A(!1)}};return I?e.jsx("div",{className:"min-h-screen bg-ink-black flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-white/20 border-t-neon-iris rounded-full animate-spin"})}):e.jsxs("div",{className:"min-h-screen bg-ink-black",children:[e.jsx("div",{className:"fixed inset-0 pointer-events-none",children:e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(124,77,255,0.08),transparent_60%)]"})}),e.jsxs("div",{className:"relative px-4 py-6 sm:p-6 lg:p-8",children:[e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6 sm:mb-10",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] tracking-[0.3em] uppercase text-neon-iris/80 font-medium mb-2 sm:mb-3",children:"Administration"}),e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-extralight tracking-tight text-white",children:"Dashboard"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[e.jsx("button",{onClick:B,disabled:k,className:`flex-1 sm:flex-none px-3 sm:px-4 py-2.5 text-[10px] sm:text-xs tracking-wide uppercase font-medium transition-all duration-300 ${m?"bg-rose-500/10 text-rose-400 border border-rose-400/30 hover:border-rose-400/50":"bg-transparent text-moon-grey/70 border border-white/10 hover:border-white/20 hover:text-white"}`,children:k?"...":m?"Resume Trading":"Pause Trading"}),e.jsx("button",{onClick:u,className:"flex-1 sm:flex-none px-3 sm:px-4 py-2.5 text-[10px] sm:text-xs tracking-wide uppercase font-medium text-white border border-white/20 hover:border-white/40 hover:bg-white/5 transition-all duration-300",children:"Refresh"})]})]})}),e.jsx(n.div,{variants:E,initial:"initial",animate:"animate",className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 mb-6 sm:mb-10",children:[{to:"/admin/markets",label:"Markets",sub:"Manage",color:"neon-iris"},{to:"/admin/users",label:"Users",sub:"Manage",color:"aqua-pulse"},{to:"/admin/withdrawals",label:"Withdrawals",sub:`${x} Pending`,color:"amber",highlight:x>0},{to:"/admin/settings",label:"Settings",sub:"Configure",color:"neon-iris"}].map(t=>e.jsx(n.div,{variants:U,children:e.jsxs(R,{to:t.to,className:"block bg-graphite-deep/30 border border-white/5 hover:border-white/10 p-3 sm:p-5 transition-all duration-300 group",children:[e.jsx("div",{className:"text-[9px] sm:text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-1 sm:mb-2 truncate",children:t.label}),e.jsx("div",{className:`text-sm sm:text-lg font-light ${t.highlight?"text-amber-400":"text-white"} group-hover:text-neon-iris transition-colors truncate`,children:t.sub})]})},t.to))}),e.jsx(n.div,{variants:E,initial:"initial",animate:"animate",className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 mb-6 sm:mb-10",children:[{label:"Total Volume",value:s?d(s.trades.total_volume):"$0",sub:`24h: ${s?d(s.trades.volume_24h):"$0"}`},{label:"Active Markets",value:(s==null?void 0:s.markets.active)??0,sub:`${(s==null?void 0:s.markets.total)??0} total`},{label:"Users",value:(s==null?void 0:s.users.total.toLocaleString())??0,sub:`+${(s==null?void 0:s.users.new_24h)??0} today`},{label:"Pending",value:x,sub:"Withdrawals",highlight:x>0}].map(t=>e.jsxs(n.div,{variants:U,className:"bg-ink-black border border-white/5 p-3 sm:p-5",children:[e.jsx("div",{className:"text-[9px] sm:text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-2 sm:mb-3 truncate",children:t.label}),e.jsx("div",{className:`text-xl sm:text-2xl font-extralight ${t.highlight?"text-amber-400":"text-white"} tabular-nums mb-0.5 sm:mb-1`,children:t.value}),e.jsx("div",{className:"text-[9px] sm:text-[10px] tracking-[0.1em] text-moon-grey/40 truncate",children:t.sub})]},t.label))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6 sm:mb-10",children:[e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-graphite-deep/30 border border-white/5 p-4 sm:p-6",children:[e.jsx("h2",{className:"text-xs sm:text-sm tracking-[0.15em] uppercase text-moon-grey/70 font-medium mb-4 sm:mb-6",children:"Trading Activity"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:[{label:"Total Trades",value:(s==null?void 0:s.trades.total.toLocaleString())??0},{label:"Trades (24h)",value:(s==null?void 0:s.trades.trades_24h.toLocaleString())??0},{label:"Total Volume",value:s?d(s.trades.total_volume):"$0"},{label:"Volume (24h)",value:s?d(s.trades.volume_24h):"$0"}].map(t=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-[10px] tracking-[0.1em] uppercase text-moon-grey/50",children:t.label}),e.jsx("span",{className:"text-xs sm:text-sm text-white font-light tabular-nums",children:t.value})]},t.label))})]}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-graphite-deep/30 border border-white/5 p-4 sm:p-6",children:[e.jsx("h2",{className:"text-xs sm:text-sm tracking-[0.15em] uppercase text-moon-grey/70 font-medium mb-4 sm:mb-6",children:"Protocol Fees"}),e.jsx("div",{className:"space-y-3 sm:space-y-4 mb-4 sm:mb-6",children:[{label:"Balance",value:i?d(i.protocol_fees.current_balance):"$0"},{label:"Lifetime",value:i?d(i.protocol_fees.lifetime_earned):"$0"},{label:"Withdrawn",value:i?d(i.protocol_fees.total_withdrawn):"$0"},{label:"Creator Fees",value:i?d(i.other_fees.creator_fees):"$0"}].map(t=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-[10px] tracking-[0.1em] uppercase text-moon-grey/50",children:t.label}),e.jsx("span",{className:"text-xs sm:text-sm text-white font-light tabular-nums",children:t.value})]},t.label))}),i&&i.protocol_fees.current_balance>0&&e.jsx("div",{className:"pt-4 border-t border-white/5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"number",value:g,onChange:t=>j(t.target.value),placeholder:"Amount (empty = all)",className:"flex-1 bg-ink-black border border-white/10 px-3 py-2.5 text-sm text-white placeholder-moon-grey/40 focus:outline-none focus:border-neon-iris/50 transition-colors"}),e.jsx("button",{onClick:G,disabled:f,className:"w-full sm:w-auto px-4 py-2.5 text-xs tracking-wide uppercase font-medium bg-white text-ink-black hover:bg-moon-grey-light transition-all duration-300 disabled:opacity-50",children:f?"...":"Withdraw"})]})})]})]}),l&&l.status==="operational"&&e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-graphite-deep/30 border border-white/5 p-4 sm:p-6 mb-6 sm:mb-10",children:[e.jsx("h2",{className:"text-xs sm:text-sm tracking-[0.15em] uppercase text-moon-grey/70 font-medium mb-4 sm:mb-6",children:"Hot Wallet Status"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-3 sm:mb-4",children:"Balances"}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-moon-grey/60 text-xs sm:text-sm",children:"USDC"}),e.jsx("span",{className:"text-white font-light tabular-nums text-xs sm:text-sm",children:((T=l.balances)==null?void 0:T.usdc_formatted)??"N/A"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-moon-grey/60 text-xs sm:text-sm",children:"SOL"}),e.jsx("span",{className:"text-white font-light tabular-nums text-xs sm:text-sm",children:(($=l.balances)==null?void 0:$.sol_formatted)??"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-3 sm:mb-4",children:"Liabilities"}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-moon-grey/60 text-xs sm:text-sm",children:"USDC Liability"}),e.jsx("span",{className:"text-white font-light tabular-nums text-xs sm:text-sm",children:((F=l.liabilities)==null?void 0:F.total_usdc_formatted)??"N/A"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-moon-grey/60 text-xs sm:text-sm",children:"Wallets"}),e.jsx("span",{className:"text-white font-light tabular-nums text-xs sm:text-sm",children:((D=l.liabilities)==null?void 0:D.total_wallets)??0})]}),l.reserve_ratio&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-moon-grey/60 text-xs sm:text-sm",children:"Reserve"}),e.jsxs("span",{className:`font-medium text-xs sm:text-sm ${l.reserve_ratio.status==="healthy"?"text-aqua-pulse":l.reserve_ratio.status==="warning"?"text-amber-400":"text-rose-400"}`,children:[l.reserve_ratio.usdc,"%"]})]})]})]})]}),l.address&&e.jsxs("div",{className:"mt-4 sm:mt-6 pt-4 sm:pt-6 border-t border-white/5",children:[e.jsx("div",{className:"text-[10px] tracking-[0.1em] uppercase text-moon-grey/40 mb-1",children:"Wallet Address"}),e.jsx("code",{className:"text-[10px] sm:text-xs text-moon-grey/60 font-mono break-all",children:l.address})]}),e.jsxs("div",{className:"mt-6 sm:mt-8 pt-6 sm:pt-8 border-t border-white/5",children:[e.jsxs("button",{onClick:()=>V(!y),className:"flex items-center justify-between w-full text-left",children:[e.jsx("h3",{className:"text-xs sm:text-sm tracking-[0.15em] uppercase text-moon-grey/70 font-medium",children:"Withdraw to Cold Storage"}),e.jsx("span",{className:`text-moon-grey/40 transition-transform duration-200 ${y?"rotate-180":""}`,children:"▼"})]}),e.jsx(ae,{children:y&&e.jsx(n.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"space-y-4 pt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-2",children:"Passcode"}),e.jsx("input",{type:"password",value:h,onChange:t=>_(t.target.value),placeholder:"Enter HIGH_ORDER_TX_PW passcode",className:"w-full bg-ink-black border border-white/10 px-3 sm:px-4 py-2.5 sm:py-3 text-sm text-white placeholder-moon-grey/40 focus:outline-none focus:border-neon-iris/50 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-2",children:"Amount (USDC)"}),e.jsx("input",{type:"number",value:p,onChange:t=>C(t.target.value),placeholder:"0.00",step:"0.000001",min:"0.01",className:"w-full bg-ink-black border border-white/10 px-3 sm:px-4 py-2.5 sm:py-3 text-sm text-white placeholder-moon-grey/40 focus:outline-none focus:border-neon-iris/50 transition-colors"}),((L=l.balances)==null?void 0:L.usdc)&&e.jsxs("p",{className:"text-[10px] text-moon-grey/40 mt-1",children:["Available: ",l.balances.usdc_formatted]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-2",children:"Cold Storage Address"}),e.jsx("input",{type:"text",value:b,onChange:t=>W(t.target.value),placeholder:"Enter Solana address",className:"w-full bg-ink-black border border-white/10 px-3 sm:px-4 py-2.5 sm:py-3 text-sm font-mono text-white placeholder-moon-grey/40 focus:outline-none focus:border-neon-iris/50 transition-colors"})]}),e.jsx("button",{onClick:X,disabled:P||!h||!p||!b,className:"w-full py-2.5 sm:py-3 text-xs sm:text-sm tracking-wide uppercase font-medium text-rose-400 border border-rose-400/30 hover:border-rose-400/50 hover:bg-rose-400/5 transition-all duration-300 disabled:opacity-50",children:P?"Withdrawing...":"Withdraw to Cold Storage"}),e.jsx("p",{className:"text-[10px] text-moon-grey/40",children:"⚠️ This action requires the HIGH_ORDER_TX_PW passcode"})]})})})]})]}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-graphite-deep/30 border border-white/5 p-4 sm:p-6",children:[e.jsx("h2",{className:"text-xs sm:text-sm tracking-[0.15em] uppercase text-moon-grey/70 font-medium mb-4 sm:mb-6",children:"Market Overview"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 sm:gap-6",children:[{label:"Total",value:(s==null?void 0:s.markets.total)??0,color:"text-white"},{label:"Active",value:(s==null?void 0:s.markets.active)??0,color:"text-neon-iris"},{label:"Resolved",value:(s==null?void 0:s.markets.resolved)??0,color:"text-aqua-pulse"},{label:"Featured",value:(s==null?void 0:s.markets.featured)??0,color:"text-amber-400"}].map(t=>e.jsxs("div",{children:[e.jsx("div",{className:"text-[9px] sm:text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-1 sm:mb-2",children:t.label}),e.jsx("div",{className:`text-xl sm:text-2xl font-extralight ${t.color} tabular-nums`,children:t.value})]},t.label))})]}),e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-6 sm:mt-10 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2 sm:gap-3",children:[{to:"/admin/disputes",label:"Disputes"},{to:"/admin/suspicious-trades",label:"Suspicious"},{to:"/admin/markets",label:"Markets"},{to:"/admin/users",label:"Users"},{to:"/admin/withdrawals",label:"Withdrawals"},{to:"/admin/settings",label:"Settings"}].map(t=>e.jsx(R,{to:t.to,className:"block p-3 sm:p-4 text-center bg-ink-black border border-white/5 hover:border-white/10 transition-all duration-300",children:e.jsx("span",{className:"text-[10px] sm:text-xs tracking-wide uppercase text-moon-grey/60 hover:text-white transition-colors",children:t.label})},t.to))})]})]})};export{ne as AdminDashboard};
