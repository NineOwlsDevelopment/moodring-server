import{r as i,aM as M,aN as U,aO as E,aP as V,aQ as B,t as o,j as e,L as x,i as d,aR as H,aS as O}from"./index-BEvDQTeY.js";const Q=()=>{var w,y,_,S;const[s,k]=i.useState(null),[t,P]=i.useState(null),[a,T]=i.useState(null),[b,F]=i.useState(0),[W,j]=i.useState(!0),[g,f]=i.useState(!1),[m,u]=i.useState(""),[c,N]=i.useState(!1),[v,p]=i.useState(!1);i.useEffect(()=>{h()},[]);const h=async()=>{var l,n;try{j(!0);const[r,L,C,$,R]=await Promise.all([M(),U(),E(),V(),B()]);k(r),P(L),T(C),F($.withdrawals.length),N(R.flags.pause_trading)}catch(r){console.error("Failed to load dashboard data:",r),o.error(((n=(l=r.response)==null?void 0:l.data)==null?void 0:n.error)||"Failed to load dashboard data")}finally{j(!1)}},A=async()=>{var l,n;try{p(!0),await H({pause_trading:!c}),N(!c),o.success(c?"Trading has been enabled":"Trading has been paused")}catch(r){console.error("Failed to update pause flags:",r),o.error(((n=(l=r.response)==null?void 0:l.data)==null?void 0:n.error)||"Failed to update pause flags")}finally{p(!1)}},D=async()=>{var l,n;if(t)try{f(!0);const r=m?Number(m):void 0;await O(r?{amount:r}:void 0),o.success("Protocol fees withdrawn successfully"),u(""),h()}catch(r){console.error("Failed to withdraw fees:",r),o.error(((n=(l=r.response)==null?void 0:l.data)==null?void 0:n.error)||"Failed to withdraw fees")}finally{f(!1)}};return W?e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:A,disabled:v,className:`btn text-sm ${c?"btn-danger":"btn-secondary"}`,children:v?"Updating...":c?"Resume Trading":"Pause Trading"}),e.jsx("button",{onClick:h,className:"btn btn-secondary text-sm",children:"Refresh"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs(x,{to:"/admin/markets",className:"card bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-500/20 hover:border-blue-500/40 transition-colors cursor-pointer",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Manage Markets"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:"Resolve & Configure"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"View and manage all markets"})]}),e.jsxs(x,{to:"/admin/users",className:"card bg-gradient-to-br from-green-500/10 to-green-600/5 border-green-500/20 hover:border-green-500/40 transition-colors cursor-pointer",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"User Management"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:"Adjust Balances"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Manage user accounts"})]}),e.jsxs(x,{to:"/admin/withdrawals",className:"card bg-gradient-to-br from-yellow-500/10 to-yellow-600/5 border-yellow-500/20 hover:border-yellow-500/40 transition-colors cursor-pointer",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Withdrawals"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-400",children:[b," Pending"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Process withdrawal requests"})]}),e.jsxs(x,{to:"/admin/settings",className:"card bg-gradient-to-br from-purple-500/10 to-purple-600/5 border-purple-500/20 hover:border-purple-500/40 transition-colors cursor-pointer",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Platform Settings"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:"Configure"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Update platform settings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"card bg-gradient-to-br from-primary-500/10 to-primary-600/5 border-primary-500/20",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Volume"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:s?d(s.trades.total_volume):"$0"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["24h: ",s?d(s.trades.volume_24h):"$0"]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-500/20",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Active Markets"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:(s==null?void 0:s.markets.active)??0}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[(s==null?void 0:s.markets.total)??0," total, ",(s==null?void 0:s.markets.resolved)??0," ","resolved"]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-green-500/10 to-green-600/5 border-green-500/20",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Users"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:(s==null?void 0:s.users.total.toLocaleString())??0}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+",(s==null?void 0:s.users.new_24h)??0," today, +",(s==null?void 0:s.users.new_7d)??0," this week"]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-yellow-500/10 to-yellow-600/5 border-yellow-500/20",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Pending Withdrawals"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:b}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Requires attention"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Trading Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Total Trades"}),e.jsx("span",{className:"text-white font-semibold",children:(s==null?void 0:s.trades.total.toLocaleString())??0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Trades (24h)"}),e.jsx("span",{className:"text-white font-semibold",children:(s==null?void 0:s.trades.trades_24h.toLocaleString())??0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Total Volume"}),e.jsx("span",{className:"text-white font-semibold",children:s?d(s.trades.total_volume):"$0"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Volume (24h)"}),e.jsx("span",{className:"text-white font-semibold",children:s?d(s.trades.volume_24h):"$0"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Protocol Fees"}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Current Balance"}),e.jsx("span",{className:"text-white font-semibold",children:t?d(t.protocol_fees.current_balance):"$0"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Lifetime Earned"}),e.jsx("span",{className:"text-white font-semibold",children:t?d(t.protocol_fees.lifetime_earned):"$0"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Total Withdrawn"}),e.jsx("span",{className:"text-white font-semibold",children:t?d(t.protocol_fees.total_withdrawn):"$0"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Creator Fees"}),e.jsx("span",{className:"text-white font-semibold",children:t?d(t.other_fees.creator_fees):"$0"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"LP Fees"}),e.jsx("span",{className:"text-white font-semibold",children:t?d(t.other_fees.lp_fees):"$0"})]})]}),t&&t.protocol_fees.current_balance>0&&e.jsxs("div",{className:"pt-4 border-t border-dark-700",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:m,onChange:l=>u(l.target.value),placeholder:"Amount (leave empty for all)",className:"input flex-1"}),e.jsx("button",{onClick:D,disabled:g,className:"btn btn-primary",children:g?"Withdrawing...":"Withdraw"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Leave amount empty to withdraw all available fees"})]})]})]}),a&&a.status==="operational"&&e.jsxs("div",{className:"card mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Hot Wallet Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Balances"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"USDC"}),e.jsx("span",{className:"text-white font-semibold",children:((w=a.balances)==null?void 0:w.usdc_formatted)??"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"SOL"}),e.jsx("span",{className:"text-white font-semibold",children:((y=a.balances)==null?void 0:y.sol_formatted)??"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Liabilities"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Total USDC Liability"}),e.jsx("span",{className:"text-white font-semibold",children:((_=a.liabilities)==null?void 0:_.total_usdc_formatted)??"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Total Wallets"}),e.jsx("span",{className:"text-white font-semibold",children:((S=a.liabilities)==null?void 0:S.total_wallets)??0})]}),a.reserve_ratio&&e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-dark-700",children:[e.jsx("span",{className:"text-gray-300",children:"Reserve Ratio"}),e.jsxs("span",{className:`font-semibold ${a.reserve_ratio.status==="healthy"?"text-green-400":a.reserve_ratio.status==="warning"?"text-yellow-400":"text-red-400"}`,children:[a.reserve_ratio.usdc,"% (",a.reserve_ratio.status,")"]})]})]})]})]}),a.address&&e.jsx("div",{className:"mt-4 pt-4 border-t border-dark-700",children:e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:a.address})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Market Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Markets"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:(s==null?void 0:s.markets.total)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Active"}),e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:(s==null?void 0:s.markets.active)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Resolved"}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:(s==null?void 0:s.markets.resolved)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Featured"}),e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:(s==null?void 0:s.markets.featured)??0})]})]})]})]})};export{Q as AdminDashboard};
