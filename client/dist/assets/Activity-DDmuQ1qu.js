import{c as g,d as f,r as x,aa as j,ab as y,j as e,ac as b,ad as N,ae as w,af as v,ag as k,L as u,V as _,i as A,y as C,ah as T,k as c,Z as q}from"./index-ro5SsOap.js";import{T as S}from"./trophy-BkSyEfhs.js";/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],D=g("funnel",L),F=s=>s.type||s.activity_type||"unknown",M=({activity:s})=>{const t=(()=>{if(!s.metadata)return{};if(typeof s.metadata=="string")try{return JSON.parse(s.metadata)}catch{return{}}return s.metadata})(),r=F(s),h=()=>{var l;switch(r){case"trade":const o=t.side||t.option_side,p=t.trade_type||t.action,a=t.quantity||t.shares||0,i=t.amount||t.cost||t.total_cost||0;return e.jsxs("span",{className:"flex flex-wrap items-center gap-1",children:[e.jsxs("span",{className:`font-semibold ${o==="yes"?"text-brand-success":"text-brand-danger"}`,children:[p==="buy"?"Bought":"Sold"," ",q(a)," ",o==null?void 0:o.toUpperCase()]}),e.jsx("span",{className:"text-moon-grey",children:"shares"}),i>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-moon-grey",children:"for"}),e.jsx("span",{className:"font-semibold text-white",children:c(i)})]})]});case"market_created":case"market_initialized":return e.jsx("span",{className:"text-moon-grey",children:"Created a new market"});case"market_resolved":return e.jsxs("span",{className:"flex items-center gap-1 flex-wrap",children:[e.jsx("span",{className:"text-moon-grey",children:"Market resolved:"}),e.jsx("span",{className:"font-semibold text-neon-iris",children:t.outcome||((l=t.winning_side)==null?void 0:l.toUpperCase())})]});case"deposit":return e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-moon-grey",children:"Deposited"}),e.jsx("span",{className:"font-semibold text-brand-success",children:c(t.amount||0)})]});case"withdrawal":return e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-moon-grey",children:"Withdrew"}),e.jsx("span",{className:"font-semibold text-amber-400",children:c(t.amount||0)})]});case"claim":return e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-moon-grey",children:"Claimed"}),e.jsx("span",{className:"font-semibold text-brand-success",children:c(t.payout||0)})]});case"lp_rewards_claimed":return e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-moon-grey",children:"Claimed LP rewards"}),e.jsx("span",{className:"font-semibold text-brand-success",children:c(t.usdc_payout||0)})]});case"liquidity_added":return e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-moon-grey",children:"Added liquidity:"}),e.jsx("span",{className:"font-semibold text-aqua-pulse",children:c(t.amount||0)})]});case"liquidity_removed":return e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-moon-grey",children:"Removed liquidity:"}),e.jsx("span",{className:"font-semibold text-amber-400",children:c(t.amount||0)})]});case"user_joined":return e.jsx("span",{className:"text-moon-grey",children:"Joined the platform"});case"comment":return e.jsx("span",{className:"flex items-center gap-1",children:e.jsx("span",{className:"text-moon-grey",children:"Commented on market"})});default:return e.jsx("span",{className:"text-moon-grey capitalize",children:r.replace(/_/g," ")})}},m=s.market_id||t.market_id||(r==="market_created"&&s.entity_type==="market"?s.entity_id:null),d=s.market_question||t.market_question||(r==="market_created"?t.question:null);return e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-graphite-light/50 hover:bg-graphite-light transition-all duration-200  animate-fade-in",children:[s.username&&e.jsx(_,{name:s.username,imageUrl:s.avatar_url,size:"md"}),e.jsx("div",{className:"flex-1 min-w-0 overflow-hidden",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden",children:[e.jsxs("div",{className:"text-sm leading-relaxed flex flex-wrap items-center gap-x-1",children:[s.username&&e.jsxs("span",{className:"font-semibold text-white truncate max-w-[120px] inline-block align-middle",children:["@",s.username]}),h()]}),m&&d&&e.jsx(u,{to:`/market/${m}`,className:"text-neon-iris hover:text-neon-iris-light text-sm font-medium line-clamp-1 mt-1.5 transition-colors block",children:A(d)})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-moon-grey-dark flex-shrink-0 whitespace-nowrap",children:[e.jsx(T,{className:"w-3.5 h-3.5"}),C(Number(s.created_at))]})]})})]})},U=[{id:"all",label:"All",icon:b},{id:"trade",label:"Trades",icon:N},{id:"deposit",label:"Deposits",icon:w},{id:"withdrawal",label:"Withdrawals",icon:v},{id:"claim",label:"Claims",icon:S}],I=()=>{const{user:s}=f(),[n,t]=x.useState(s?"my":"global"),[r,h]=x.useState([]),[m,d]=x.useState(!0),[l,o]=x.useState("all");x.useEffect(()=>{p()},[n,l,s]);const p=async()=>{d(!0);try{if(n==="my"&&s){const{activities:a}=await j({type:l!=="all"?l:void 0});h(a)}else{const{activities:a}=await y();h(a)}}catch(a){console.error("Failed to load activities:",a)}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen pb-20 md:pb-8",children:[e.jsx("div",{className:"fixed inset-0 bg-gradient-to-b from-neon-iris/5 via-transparent to-aqua-pulse/5 pointer-events-none"}),e.jsxs("div",{className:"relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-1",children:"Activity"}),e.jsx("p",{className:"text-moon-grey text-sm",children:"Track your transactions and platform activity"})]}),e.jsxs("div",{className:"flex bg-graphite-light rounded-xl p-1 ",children:[s&&e.jsx("button",{onClick:()=>t("my"),className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 min-h-[40px] ${n==="my"?"bg-gradient-brand text-white shadow-neon-subtle":"text-moon-grey hover:text-white hover:bg-white/5"}`,children:"My Activity"}),e.jsx("button",{onClick:()=>t("global"),className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 min-h-[40px] ${n==="global"?"bg-gradient-brand text-white shadow-neon-subtle":"text-moon-grey hover:text-white hover:bg-white/5"}`,children:"Global Feed"})]})]}),n==="my"&&s&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(D,{className:"w-4 h-4 text-moon-grey-dark"}),e.jsx("span",{className:"text-sm text-moon-grey-dark",children:"Filter by"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(a=>{const i=a.icon;return e.jsxs("button",{onClick:()=>o(a.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 min-h-[40px] ${l===a.id?"bg-gradient-brand text-white shadow-neon-subtle":"bg-graphite-light text-moon-grey  hover:text-white "}`,children:[e.jsx(i,{className:"w-4 h-4"}),a.label]},a.id)})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"relative",children:e.jsxs("span",{className:"flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-success opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-brand-success"})]})}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:n==="my"?"Recent Transactions":"Platform Activity"})]}),m?e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((a,i)=>e.jsx("div",{className:"h-20 bg-graphite-light rounded-xl skeleton-pulse"},i))}):r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-graphite-light flex items-center justify-center mb-4",children:e.jsx(k,{className:"w-8 h-8 text-moon-grey-dark"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No activity yet"}),e.jsx("p",{className:"text-moon-grey text-center max-w-sm mb-6",children:n==="my"?"Start trading to see your transaction history here!":"No recent activity on the platform."}),n==="my"&&e.jsx(u,{to:"/markets",className:"btn btn-primary",children:"Browse Markets"})]}):e.jsx("div",{className:"space-y-3",children:r.map((a,i)=>e.jsx("div",{style:{animationDelay:`${i*50}ms`},children:e.jsx(M,{activity:a})},a.id))})]}),!m&&r.length>0&&e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{className:"text-neon-iris hover:text-neon-iris-light text-sm font-medium transition-colors",children:"Load more activity"})})]})]})};export{I as Activity};
