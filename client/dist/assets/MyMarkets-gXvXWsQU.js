import{i as $,a6 as B,r as n,ay as T,j as e,m as d,L as x,b as h,az as V,t as m,aA as H}from"./index-4FQH80kW.js";import{C as E}from"./ConfirmationModal-CLodoB8E.js";const P={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:[.25,.1,.25,1]}},R={animate:{transition:{staggerChildren:.08}}},w={all:{label:"All",color:"text-moon-grey/70",borderColor:"border-white/10"},pending:{label:"Pending Setup",color:"text-amber-400",borderColor:"border-amber-400/30"},active:{label:"Active",color:"text-aqua-pulse",borderColor:"border-aqua-pulse/30"},resolved:{label:"Resolved",color:"text-neon-iris",borderColor:"border-neon-iris/30"},expired:{label:"Expired",color:"text-rose-400",borderColor:"border-rose-400/30"}},Y=()=>{const{user:p}=$(),k=B(),[o,M]=n.useState("all"),[r,_]=n.useState(null),[L,N]=n.useState(!0),[u,y]=n.useState(null),[g,C]=n.useState(null),[D,b]=n.useState(!1),[f,j]=n.useState(null);n.useEffect(()=>{p&&v()},[p,o]);const v=async()=>{N(!0);try{const t=await T({status:o});_(t)}catch(t){console.error("Failed to load markets:",t)}finally{N(!1)}},S=t=>t.is_initialized?t.is_resolved?"resolved":t.expiration_timestamp<=Math.floor(Date.now()/1e3)?"expired":"active":"pending",q=t=>{const s=new Date(t*1e3),a=new Date,i=s.getTime()-a.getTime();return i<0?`Expired ${Math.abs(Math.floor(i/(1e3*60*60*24)))}d ago`:i<1e3*60*60*24?`${Math.floor(i/(1e3*60*60))}h remaining`:`${Math.floor(i/(1e3*60*60*24))}d remaining`},z=async t=>{var s,a;if(u!==t){y(t);try{const l=(await V(t)).amount;m.success(`Successfully withdrew ${h(l)} in creator fees!`),await v()}catch(i){m.error(((a=(s=i.response)==null?void 0:s.data)==null?void 0:a.error)||"Failed to withdraw fees. Please try again.")}finally{y(null)}}},A=t=>{j(t),b(!0)},W=async()=>{var t,s;if(f){C(f),b(!1);try{await H(f),m.success("Market deleted successfully"),await v()}catch(a){m.error(((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.error)||"Failed to delete market. Please try again.")}finally{C(null),j(null)}}},F=()=>{b(!1),j(null)};return p?e.jsxs("div",{className:"min-h-screen bg-ink-black pb-20 md:pb-8",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(124,77,255,0.08),transparent_60%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_60%_40%_at_80%_100%,rgba(33,246,210,0.05),transparent_50%)]"})]}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-neon-iris/20 to-transparent"}),e.jsxs("div",{className:"relative section-container py-12 md:py-16",children:[e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end justify-between gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"h-px w-8 sm:w-12 bg-gradient-to-r from-transparent to-neon-iris/60"}),e.jsx("span",{className:"text-[10px] sm:text-xs tracking-[0.3em] uppercase text-moon-grey/70 font-medium",children:"Creator Dashboard"}),e.jsx("div",{className:"h-px w-8 sm:w-12 bg-gradient-to-l from-transparent to-neon-iris/60"})]}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-extralight tracking-tight text-white mb-3",children:"My Markets"}),e.jsx("p",{className:"text-moon-grey/60 font-light",children:"Manage and monitor the markets you've created"})]}),e.jsxs(x,{to:"/create",className:"group px-6 py-3 text-sm font-medium tracking-wide uppercase bg-white text-ink-black hover:bg-moon-grey-light transition-all duration-300 inline-flex items-center gap-3",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"Create Market"})]})]}),(r==null?void 0:r.statusCounts)&&e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","active","resolved","expired"].map(t=>{const s=w[t],a=t==="all"?r.statusCounts.total:r.statusCounts[t],i=o===t;return e.jsx("button",{onClick:()=>M(t),className:`px-4 py-2.5 text-xs tracking-wide uppercase font-medium transition-all duration-300 border ${i?"bg-white text-ink-black border-white":`bg-transparent ${s.color} ${s.borderColor} hover:border-white/30`}`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.label}),e.jsx("span",{className:"tabular-nums font-bold",children:a})]})},t)})})]}),L?e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((t,s)=>e.jsx("div",{className:"h-40 bg-graphite-deep/50 border border-white/5 animate-pulse"},s))}):!r||r.markets.length===0?e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-graphite-deep/30 border border-white/5 text-center py-20",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 border border-white/10 mb-6",children:e.jsx("svg",{className:"w-7 h-7 text-moon-grey/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h2",{className:"text-xl font-light text-white mb-3",children:o==="all"?"No markets yet":`No ${w[o].label.toLowerCase()} markets`}),e.jsx("p",{className:"text-moon-grey/60 mb-8 font-light",children:o==="all"?"Create your first prediction market to get started":"You don't have any markets with this status"}),o==="all"&&e.jsxs(x,{to:"/create",className:"group px-6 py-3 text-sm font-medium tracking-wide uppercase bg-white text-ink-black hover:bg-moon-grey-light transition-all duration-300 inline-flex items-center gap-3",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"Create Your First Market"})]})]}):e.jsx(d.div,{variants:R,initial:"initial",animate:"animate",className:"space-y-4",children:r.markets.map(t=>{var l;const s=S(t),a=w[s],i=s==="pending";return e.jsx(d.div,{variants:P,className:"group relative bg-graphite-deep/30 border border-white/5 hover:border-white/10 transition-colors duration-300 overflow-hidden",children:e.jsxs("div",{className:"relative flex flex-col lg:flex-row gap-5 p-5 lg:p-6",children:[e.jsx(x,{to:`/market/${t.id}`,className:"flex-shrink-0 group/image",children:e.jsx("div",{className:"relative overflow-hidden",children:e.jsx("img",{src:t.image_url||"/placeholder-market.png",alt:t.question,width:120,height:120,loading:"lazy",className:"relative w-full lg:w-28 h-28 object-cover bg-graphite-deep border border-white/10 group-hover/image:border-neon-iris/30 transition-all duration-300",onError:c=>{c.target.src="https://placehold.co/120x120/1a1a2e/6366f1?text=?"}})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[e.jsx("span",{className:`px-3 py-1 text-[10px] tracking-[0.15em] uppercase font-medium border ${a.color} ${a.borderColor}`,children:a.label}),(l=t.categories)==null?void 0:l.map(c=>e.jsx("span",{className:"px-3 py-1 text-[10px] tracking-[0.15em] uppercase font-medium text-moon-grey/60 border border-white/10",children:c.name},c.id))]}),e.jsx("h3",{className:"text-lg font-light text-white mb-4 line-clamp-2 group-hover:text-neon-iris/90 transition-colors duration-300",children:t.question}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] tracking-[0.1em] uppercase text-moon-grey/50 block mb-1",children:"Time"}),e.jsx("span",{className:"text-white font-light tabular-nums",children:q(t.expiration_timestamp)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] tracking-[0.1em] uppercase text-moon-grey/50 block mb-1",children:"Options"}),e.jsx("span",{className:"text-white font-light tabular-nums",children:t.total_options})]}),t.is_initialized&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] tracking-[0.1em] uppercase text-moon-grey/50 block mb-1",children:"Volume"}),e.jsx("span",{className:"text-white font-light tabular-nums",children:h(t.total_volume)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] tracking-[0.1em] uppercase text-moon-grey/50 block mb-1",children:"Liquidity"}),e.jsx("span",{className:"text-white font-light tabular-nums",children:h(t.shared_pool_liquidity)})]}),t.creator_fees_collected>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] tracking-[0.1em] uppercase text-aqua-pulse/80 block mb-1",children:"Fees"}),e.jsx("span",{className:"text-aqua-pulse font-medium tabular-nums",children:h(t.creator_fees_collected)})]})]})]}),i&&e.jsx("div",{className:"mt-5 p-4 bg-amber-400/5 border border-amber-400/20",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-amber-400 text-sm font-medium mb-1",children:"Setup Required"}),e.jsx("p",{className:"text-moon-grey/60 text-sm font-light",children:t.total_options===0?"Add options to your market, then add liquidity to start trading.":t.total_options<2?"Add at least 2 options, then add liquidity to start trading.":"Add initial liquidity to activate trading on this market."})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>k(`/create?market=${t.id}`),className:"px-4 py-2 text-xs tracking-wide uppercase font-medium text-white border border-white/20 hover:border-white/40 hover:bg-white/5 transition-all duration-300 flex-1 sm:flex-none flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Continue"]}),e.jsx("button",{onClick:()=>A(t.id),disabled:g===t.id,className:"px-4 py-2 text-xs tracking-wide uppercase font-medium text-rose-400 border border-rose-400/20 hover:border-rose-400/40 hover:bg-rose-400/5 transition-all duration-300 flex-1 sm:flex-none flex items-center justify-center gap-2 disabled:opacity-50",children:g===t.id?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Deleting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e.jsx("span",{children:"Delete"})]})})]})]})})]}),e.jsxs("div",{className:"flex flex-row lg:flex-col gap-2 flex-shrink-0 lg:w-28",children:[e.jsxs(x,{to:`/market/${t.id}`,className:"px-4 py-2 text-xs tracking-wide uppercase font-medium text-white border border-white/20 hover:border-white/40 hover:bg-white/5 transition-all duration-300 flex-1 lg:flex-none flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsx("span",{className:"hidden sm:inline",children:"View"})]}),s==="expired"&&!t.is_resolved&&e.jsxs("button",{onClick:()=>k(`/market/${t.id}`),className:"px-4 py-2 text-xs tracking-wide uppercase font-medium bg-white text-ink-black hover:bg-moon-grey-light transition-all duration-300 flex-1 lg:flex-none flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Resolve"})]}),t.creator_fees_collected>0&&e.jsx("button",{onClick:()=>z(t.id),disabled:u===t.id,className:"px-4 py-2 text-xs tracking-wide uppercase font-medium text-aqua-pulse border border-aqua-pulse/30 hover:border-aqua-pulse/50 hover:bg-aqua-pulse/5 transition-all duration-300 flex-1 lg:flex-none flex items-center justify-center gap-2 disabled:opacity-50",children:u===t.id?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"hidden sm:inline",children:"Withdrawing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Withdraw"})]})})]})]})},t.id)})}),r&&r.pagination.totalPages>1&&e.jsx("div",{className:"flex justify-center gap-2 mt-10",children:Array.from({length:r.pagination.totalPages}).map((t,s)=>{const a=r.pagination.page===s+1;return e.jsx("button",{onClick:()=>{},className:`w-10 h-10 text-sm font-medium transition-all duration-300 ${a?"bg-white text-ink-black":"bg-transparent text-moon-grey/60 border border-white/10 hover:border-white/20 hover:text-white"}`,children:s+1},s)})}),e.jsx(E,{isOpen:D,onClose:F,onConfirm:W,title:"Delete Market",message:"Are you sure you want to delete this market? This action cannot be undone. All options and data associated with this market will be permanently removed.",confirmText:"Delete Market",cancelText:"Cancel",variant:"danger",isLoading:g!==null})]})]}):e.jsxs("div",{className:"min-h-screen bg-ink-black",children:[e.jsx("div",{className:"fixed inset-0 pointer-events-none",children:e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(124,77,255,0.08),transparent_60%)]"})}),e.jsxs("div",{className:"relative section-container py-20 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 border border-white/10 mb-8",children:e.jsx("svg",{className:"w-10 h-10 text-neon-iris/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("h1",{className:"text-4xl font-extralight tracking-tight text-white mb-4",children:"My Markets"}),e.jsx("p",{className:"text-moon-grey/60 font-light",children:"Connect your wallet to view your created markets"})]})]})};export{Y as MyMarkets};
