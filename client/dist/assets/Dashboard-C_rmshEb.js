import{r as l,aY as X,aZ as Y,a_ as Z,a$ as z,b0 as J,t as o,j as e,L as g,h as n,b1 as K,b2 as Q,b3 as ee}from"./index-CyUWOdn5.js";const te=()=>{var W,A,F,D,$;const[s,L]=l.useState(null),[i,R]=l.useState(null),[r,U]=l.useState(null),[j,E]=l.useState(0),[H,f]=l.useState(!0),[N,p]=l.useState(!1),[u,v]=l.useState(""),[c,w]=l.useState(!1),[y,S]=l.useState(!1),[x,_]=l.useState(""),[m,T]=l.useState(""),[h,k]=l.useState(""),[C,P]=l.useState(!1);l.useEffect(()=>{b()},[]);const b=async()=>{var t,d;try{f(!0);const[a,q,B,G,I]=await Promise.all([X(),Y(),Z(),z(),J()]);L(a),R(q),U(B),E(G.withdrawals.length),w(I.flags.pause_trading)}catch(a){console.error("Failed to load dashboard data:",a),o.error(((d=(t=a.response)==null?void 0:t.data)==null?void 0:d.error)||"Failed to load dashboard data")}finally{f(!1)}},M=async()=>{var t,d;try{S(!0),await K({pause_trading:!c}),w(!c),o.success(c?"Trading has been enabled":"Trading has been paused")}catch(a){console.error("Failed to update pause flags:",a),o.error(((d=(t=a.response)==null?void 0:t.data)==null?void 0:d.error)||"Failed to update pause flags")}finally{S(!1)}},O=async()=>{var t,d;if(i)try{p(!0);const a=u?Number(u):void 0;await Q(a?{amount:a}:void 0),o.success("Protocol fees withdrawn successfully"),v(""),b()}catch(a){console.error("Failed to withdraw fees:",a),o.error(((d=(t=a.response)==null?void 0:t.data)==null?void 0:d.error)||"Failed to withdraw fees")}finally{p(!1)}},V=async()=>{var t,d;if(!x||!m||!h){o.error("Please fill in all fields");return}try{P(!0);const a=await ee({passcode:x,amount:Number(m),destination_address:h});o.success(`Successfully withdrew ${n(a.amount)} to cold storage`),_(""),T(""),k(""),b()}catch(a){console.error("Failed to withdraw to cold storage:",a),o.error(((d=(t=a.response)==null?void 0:t.data)==null?void 0:d.error)||"Failed to withdraw to cold storage")}finally{P(!1)}};return H?e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:M,disabled:y,className:`btn text-sm ${c?"btn-danger":"btn-secondary"}`,children:y?"Updating...":c?"Resume Trading":"Pause Trading"}),e.jsx("button",{onClick:b,className:"btn btn-secondary text-sm",children:"Refresh"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs(g,{to:"/admin/markets",className:"card bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-500/20 hover:border-blue-500/40 transition-colors cursor-pointer",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Manage Markets"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:"Resolve & Configure"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"View and manage all markets"})]}),e.jsxs(g,{to:"/admin/users",className:"card bg-gradient-to-br from-green-500/10 to-green-600/5 border-green-500/20 hover:border-green-500/40 transition-colors cursor-pointer",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"User Management"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:"Adjust Balances"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Manage user accounts"})]}),e.jsxs(g,{to:"/admin/withdrawals",className:"card bg-gradient-to-br from-yellow-500/10 to-yellow-600/5 border-yellow-500/20 hover:border-yellow-500/40 transition-colors cursor-pointer",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Withdrawals"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-400",children:[j," Pending"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Process withdrawal requests"})]}),e.jsxs(g,{to:"/admin/settings",className:"card bg-gradient-to-br from-purple-500/10 to-purple-600/5 border-purple-500/20 hover:border-purple-500/40 transition-colors cursor-pointer",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Platform Settings"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:"Configure"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Update platform settings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"card bg-gradient-to-br from-primary-500/10 to-primary-600/5 border-primary-500/20",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Volume"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:s?n(s.trades.total_volume):"$0"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["24h: ",s?n(s.trades.volume_24h):"$0"]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-500/20",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Active Markets"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:(s==null?void 0:s.markets.active)??0}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[(s==null?void 0:s.markets.total)??0," total, ",(s==null?void 0:s.markets.resolved)??0," ","resolved"]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-green-500/10 to-green-600/5 border-green-500/20",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Users"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:(s==null?void 0:s.users.total.toLocaleString())??0}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+",(s==null?void 0:s.users.new_24h)??0," today, +",(s==null?void 0:s.users.new_7d)??0," this week"]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-yellow-500/10 to-yellow-600/5 border-yellow-500/20",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Pending Withdrawals"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:j}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Requires attention"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Trading Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Total Trades"}),e.jsx("span",{className:"text-white font-semibold",children:(s==null?void 0:s.trades.total.toLocaleString())??0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Trades (24h)"}),e.jsx("span",{className:"text-white font-semibold",children:(s==null?void 0:s.trades.trades_24h.toLocaleString())??0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Total Volume"}),e.jsx("span",{className:"text-white font-semibold",children:s?n(s.trades.total_volume):"$0"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Volume (24h)"}),e.jsx("span",{className:"text-white font-semibold",children:s?n(s.trades.volume_24h):"$0"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Protocol Fees"}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Current Balance"}),e.jsx("span",{className:"text-white font-semibold",children:i?n(i.protocol_fees.current_balance):"$0"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Lifetime Earned"}),e.jsx("span",{className:"text-white font-semibold",children:i?n(i.protocol_fees.lifetime_earned):"$0"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Total Withdrawn"}),e.jsx("span",{className:"text-white font-semibold",children:i?n(i.protocol_fees.total_withdrawn):"$0"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Creator Fees"}),e.jsx("span",{className:"text-white font-semibold",children:i?n(i.other_fees.creator_fees):"$0"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"LP Fees"}),e.jsx("span",{className:"text-white font-semibold",children:i?n(i.other_fees.lp_fees):"$0"})]})]}),i&&i.protocol_fees.current_balance>0&&e.jsxs("div",{className:"pt-4 border-t border-dark-700",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:u,onChange:t=>v(t.target.value),placeholder:"Amount (leave empty for all)",className:"input flex-1"}),e.jsx("button",{onClick:O,disabled:N,className:"btn btn-primary",children:N?"Withdrawing...":"Withdraw"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Leave amount empty to withdraw all available fees"})]})]})]}),r&&r.status==="operational"&&e.jsxs("div",{className:"card mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Hot Wallet Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Balances"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"USDC"}),e.jsx("span",{className:"text-white font-semibold",children:((W=r.balances)==null?void 0:W.usdc_formatted)??"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"SOL"}),e.jsx("span",{className:"text-white font-semibold",children:((A=r.balances)==null?void 0:A.sol_formatted)??"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Liabilities"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Total USDC Liability"}),e.jsx("span",{className:"text-white font-semibold",children:((F=r.liabilities)==null?void 0:F.total_usdc_formatted)??"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Total Wallets"}),e.jsx("span",{className:"text-white font-semibold",children:((D=r.liabilities)==null?void 0:D.total_wallets)??0})]}),r.reserve_ratio&&e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-dark-700",children:[e.jsx("span",{className:"text-gray-300",children:"Reserve Ratio"}),e.jsxs("span",{className:`font-semibold ${r.reserve_ratio.status==="healthy"?"text-green-400":r.reserve_ratio.status==="warning"?"text-yellow-400":"text-red-400"}`,children:[r.reserve_ratio.usdc,"% (",r.reserve_ratio.status,")"]})]})]})]})]}),r.address&&e.jsx("div",{className:"mt-4 pt-4 border-t border-dark-700",children:e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:r.address})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-dark-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Withdraw to Cold Storage"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Passcode"}),e.jsx("input",{type:"password",value:x,onChange:t=>_(t.target.value),placeholder:"Enter HIGH_ORDER_TX_PW passcode",className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Amount (USDC)"}),e.jsx("input",{type:"number",value:m,onChange:t=>T(t.target.value),placeholder:"0.00",step:"0.000001",min:"0.01",className:"input w-full"}),(($=r.balances)==null?void 0:$.usdc)&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Available: ",r.balances.usdc_formatted]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cold Storage Address"}),e.jsx("input",{type:"text",value:h,onChange:t=>k(t.target.value),placeholder:"Enter Solana address",className:"input w-full font-mono text-sm"})]}),e.jsx("button",{onClick:V,disabled:C||!x||!m||!h,className:"btn btn-danger w-full",children:C?"Withdrawing...":"Withdraw to Cold Storage"}),e.jsx("p",{className:"text-xs text-gray-500",children:"⚠️ This action requires the HIGH_ORDER_TX_PW passcode and will transfer funds from the hot wallet to cold storage. This action cannot be undone."})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Market Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Markets"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:(s==null?void 0:s.markets.total)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Active"}),e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:(s==null?void 0:s.markets.active)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Resolved"}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:(s==null?void 0:s.markets.resolved)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Featured"}),e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:(s==null?void 0:s.markets.featured)??0})]})]})]})]})};export{te as AdminDashboard};
