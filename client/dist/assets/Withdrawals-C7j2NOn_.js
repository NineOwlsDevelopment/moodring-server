import{r as n,b1 as j,t as o,j as e,m as l,b as u,b9 as v,A as N,bf as w}from"./index-4FQH80kW.js";const S=()=>{const[c,g]=n.useState([]),[d,x]=n.useState(!0),[p,h]=n.useState(null),[b,f]=n.useState(null),[s,r]=n.useState({withdrawalId:null,status:"completed",transactionSignature:"",failureReason:""});n.useEffect(()=>{m()},[]);const m=async()=>{var t,a;try{x(!0);const i=await j();g(i.withdrawals)}catch(i){console.error("Failed to load withdrawals:",i),o.error(((a=(t=i.response)==null?void 0:t.data)==null?void 0:a.error)||"Failed to load withdrawals")}finally{x(!1)}},y=async()=>{var t,a;if(s.withdrawalId){if(s.status==="completed"&&!s.transactionSignature){o.error("Transaction signature is required for completed withdrawals");return}if(s.status==="failed"&&!s.failureReason){o.error("Failure reason is required for failed withdrawals");return}try{h(s.withdrawalId),await w(s.withdrawalId,{status:s.status,transaction_signature:s.transactionSignature||void 0,failure_reason:s.failureReason||void 0}),o.success(`Withdrawal ${s.status} successfully`),r({withdrawalId:null,status:"completed",transactionSignature:"",failureReason:""}),m()}catch(i){console.error("Failed to process withdrawal:",i),o.error(((a=(t=i.response)==null?void 0:t.data)==null?void 0:a.error)||"Failed to process withdrawal")}finally{h(null)}}};return e.jsxs("div",{className:"min-h-screen bg-ink-black",children:[e.jsx("div",{className:"fixed inset-0 pointer-events-none",children:e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(124,77,255,0.08),transparent_60%)]"})}),e.jsxs("div",{className:"relative px-4 py-6 sm:p-6 lg:p-8",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 sm:mb-10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] tracking-[0.3em] uppercase text-neon-iris/80 font-medium mb-2 sm:mb-3",children:"Administration"}),e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-extralight tracking-tight text-white",children:"Pending Withdrawals"})]}),e.jsx("button",{onClick:m,disabled:d,className:"w-full sm:w-auto px-4 py-2.5 text-xs tracking-wide uppercase font-medium text-white border border-white/20 hover:border-white/40 hover:bg-white/5 transition-all duration-300 disabled:opacity-50",children:d?"Loading...":"Refresh"})]}),d?e.jsx("div",{className:"bg-graphite-deep/30 border border-white/5 flex items-center justify-center py-20",children:e.jsx("div",{className:"w-8 h-8 border-2 border-white/20 border-t-neon-iris rounded-full animate-spin"})}):c.length===0?e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-graphite-deep/30 border border-white/5 text-center py-20",children:e.jsx("p",{className:"text-moon-grey/40 text-sm font-light",children:"No pending withdrawals"})}):e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"bg-graphite-deep/30 border border-white/5",children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("th",{className:"text-left py-4 px-5 text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 font-medium",children:"User"}),e.jsx("th",{className:"text-left py-4 px-5 text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 font-medium",children:"Amount"}),e.jsx("th",{className:"text-left py-4 px-5 text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 font-medium",children:"Destination"}),e.jsx("th",{className:"text-left py-4 px-5 text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 font-medium",children:"Requested"}),e.jsx("th",{className:"text-left py-4 px-5 text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:c.map(t=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/[0.02] transition-colors",children:[e.jsx("td",{className:"py-4 px-5",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-light text-sm",children:t.username||"Unknown"}),e.jsx("div",{className:"text-[10px] text-moon-grey/40",children:t.email})]})}),e.jsx("td",{className:"py-4 px-5",children:e.jsx("div",{className:"text-white font-light tabular-nums",children:t.token_symbol==="USDC"?u(t.amount):`${(t.amount/1e9).toFixed(4)} SOL`})}),e.jsx("td",{className:"py-4 px-5",children:e.jsx("code",{className:"font-mono text-[10px] text-moon-grey/40",children:v(t.destination_address,8)})}),e.jsx("td",{className:"py-4 px-5 text-moon-grey/40 text-sm font-light",children:new Date(typeof t.created_at=="string"&&t.created_at.includes(" ")?t.created_at.replace(" ","T"):t.created_at).toLocaleString()}),e.jsx("td",{className:"py-4 px-5",children:e.jsx("button",{onClick:()=>r({withdrawalId:t.id,status:"completed",transactionSignature:"",failureReason:""}),className:"text-[10px] tracking-[0.1em] uppercase text-neon-iris hover:text-neon-iris/80 font-medium transition-colors",children:"Process"})})]},t.id))})]})}),e.jsx("div",{className:"lg:hidden divide-y divide-white/5",children:c.map(t=>{const a=b===t.id;return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between cursor-pointer",onClick:()=>f(a?null:t.id),children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-white font-light text-sm",children:t.username||"Unknown"}),e.jsx("div",{className:"text-[10px] text-moon-grey/40 mt-0.5 truncate",children:t.email})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white font-light tabular-nums",children:t.token_symbol==="USDC"?u(t.amount):`${(t.amount/1e9).toFixed(4)} SOL`}),e.jsx("span",{className:`text-moon-grey/40 transition-transform duration-200 inline-block text-xs ${a?"rotate-180":""}`,children:"â–¼"})]})]}),e.jsx(N,{children:a&&e.jsx(l.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"pt-4 mt-4 border-t border-white/5 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-moon-grey/40",children:"Destination"}),e.jsx("div",{className:"text-moon-grey/60 font-mono text-[10px] break-all mt-1",children:t.destination_address})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-moon-grey/40",children:"Requested"}),e.jsx("div",{className:"text-white font-light mt-1",children:new Date(typeof t.created_at=="string"&&t.created_at.includes(" ")?t.created_at.replace(" ","T"):t.created_at).toLocaleString()})]})]}),e.jsx("button",{onClick:i=>{i.stopPropagation(),r({withdrawalId:t.id,status:"completed",transactionSignature:"",failureReason:""})},className:"w-full py-2.5 text-xs tracking-wide uppercase font-medium bg-white text-ink-black hover:bg-moon-grey-light transition-all duration-300",children:"Process Withdrawal"})]})})})]},t.id)})})]}),s.withdrawalId&&e.jsx("div",{className:"fixed inset-0 bg-ink-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>r({withdrawalId:null,status:"completed",transactionSignature:"",failureReason:""}),children:e.jsxs(l.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},onClick:t=>t.stopPropagation(),className:"relative bg-graphite-deep border border-white/5 max-w-md w-full p-5 sm:p-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-neon-iris/50 to-transparent"}),e.jsx("h2",{className:"text-lg sm:text-xl font-light text-white mb-5 sm:mb-6",children:"Process Withdrawal"}),e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-2 sm:mb-3",children:"Status"}),e.jsxs("select",{value:s.status,onChange:t=>r(a=>({...a,status:t.target.value})),className:"w-full bg-ink-black border border-white/10 px-3 sm:px-4 py-2.5 sm:py-3 text-sm text-white focus:outline-none focus:border-neon-iris/50 transition-colors",children:[e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),s.status==="completed"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-2 sm:mb-3",children:"Transaction Signature *"}),e.jsx("input",{type:"text",value:s.transactionSignature,onChange:t=>r(a=>({...a,transactionSignature:t.target.value})),placeholder:"Transaction signature",className:"w-full bg-ink-black border border-white/10 px-3 sm:px-4 py-2.5 sm:py-3 text-sm text-white placeholder-moon-grey/40 focus:outline-none focus:border-neon-iris/50 transition-colors font-mono"})]}),s.status==="failed"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] tracking-[0.15em] uppercase text-moon-grey/50 mb-2 sm:mb-3",children:"Failure Reason *"}),e.jsx("textarea",{value:s.failureReason,onChange:t=>r(a=>({...a,failureReason:t.target.value})),placeholder:"Reason for failure",className:"w-full bg-ink-black border border-white/10 px-3 sm:px-4 py-2.5 sm:py-3 text-sm text-white placeholder-moon-grey/40 focus:outline-none focus:border-neon-iris/50 transition-colors resize-none",rows:3})]})]}),e.jsxs("div",{className:"flex gap-3 mt-5 sm:mt-6",children:[e.jsx("button",{onClick:()=>r({withdrawalId:null,status:"completed",transactionSignature:"",failureReason:""}),className:"flex-1 py-2.5 sm:py-3 text-xs tracking-wide uppercase font-medium text-white border border-white/20 hover:border-white/40 hover:bg-white/5 transition-all duration-300",children:"Cancel"}),e.jsx("button",{onClick:y,disabled:p===s.withdrawalId,className:"flex-1 py-2.5 sm:py-3 text-xs tracking-wide uppercase font-medium bg-white text-ink-black hover:bg-moon-grey-light transition-all duration-300 disabled:opacity-50",children:p===s.withdrawalId?"Processing...":"Process"})]})]})})]})]})};export{S as AdminWithdrawals};
